!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e){var n=e.baseUrl,r=e.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.baseUrl=n,this.headers=r,this.auth=this.headers.authorization}var n,r;return n=t,r=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error getting user data: ".concat(e.status,",\n      ").concat(e.statusText))}},{key:"getInitialCards",value:function(){return fetch("".concat(this.baseUrl,"/cards"),{headers:{authorization:this.auth}}).then(this._checkResponse)}},{key:"getUserInfo",value:function(){return fetch("".concat(this.baseUrl,"/users/me"),{headers:{authorization:this.auth}}).then(this._checkResponse)}},{key:"postUserInfo",value:function(e,t){return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:e,about:t})}).then(this._checkResponse)}},{key:"postUserAvatar",value:function(e){return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}},{key:"postCard",value:function(e){var t=e.name,n=e.link;return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify({name:t,link:n})}).then(this._checkResponse)}},{key:"postLikes",value:function(e){return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this.headers,body:JSON.stringify({})}).then(this._checkResponse)}},{key:"deleteLikes",value:function(e){return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this.headers,body:JSON.stringify({})}).then(this._checkResponse)}},{key:"deleteCard",value:function(e){var t=e.cardId;return fetch("".concat(this.baseUrl,"/cards/").concat(t),{method:"DELETE",headers:this.headers,body:JSON.stringify({})}).then(this._checkResponse)}}],r&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t){var n,r,i=this,o=t.name,a=t.link,s=t.id,c=t.owner,u=t.likes,l=t.template,f=t.user,h=t.imageOpener,d=t.eraserOpener,p=t.handleLike,y=t.handleDislike;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){var t=e.target,n={button:i.likeBtn,cardId:i.id};t.classList.contains("element__liked")?i.handleDislike(n):i.handleLike(n)},(n="likingTheCard")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this.name=o,this.link=a,this.id=s,this.owner=c,this._ownerId=this.owner._id,this.user=f,this.likes=u,this.likesAmount=this.likes.length,this.handleLike=p,this.handleDislike=y,this.template=l,this.imageOpener=h,this.eraserOpener=d,this._cardElement=this.template.querySelector(".element").cloneNode(!0),this._cardImage=this._cardElement.querySelector(".element__image"),this.likeCounter=this._cardElement.querySelector(".element__counter"),this.eraseBtn=this._cardElement.querySelector(".element__erase"),this.likeBtn=this._cardElement.querySelector(".element__like"),this.eraseBtn.cardId=this.id}var t,r;return t=e,(r=[{key:"createCardElement",value:function(){return this._cardElement.querySelector(".element__location").textContent=this.name,this._cardImage.alt=this.name,this._cardImage.src=this.link,this.likeCounter.textContent=this.likesAmount,this.newLikesAmount="",this._setEventListeners(),this.liked=this._hasLiked(),this._toggleButtonState(),this._cardElement}},{key:"_toggleButtonState",value:function(){this.user!==this._ownerId&&(this.eraseBtn.classList.add("element__erase_disabled"),this.eraseBtn.disabled=!0)}},{key:"_hasLiked",value:function(){var e=this;this.likes.some((function(t){return t._id===e.user}))&&this.likeBtn.classList.add("element__liked")}},{key:"_setEventListeners",value:function(){var e=this;this.likeBtn.addEventListener("click",(function(t){e.likingTheCard(t)})),this.eraseBtn.addEventListener("click",this.eraserOpener),this._cardImage.addEventListener("click",(function(t){e.imageOpener(t)}))}},{key:"likeTheCard",value:function(e){e.classList.add("element__liked"),this.newLikesAmount=this.likesAmount+1}},{key:"dislikeTheCard",value:function(e){this.newLikesAmount=this.likesAmount-1,e.classList.remove("element__liked")}},{key:"newLikeNumber",value:function(e,t){e.nextElementSibling.textContent=t}},{key:"eraseTheCard",value:function(e){var t=e.selectedCard;t.remove(),t=null}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._form=t,this._settings=n,this._submitButton=this._form.querySelector(this._settings.submitButton),this._submitButtonDisabled=this._settings.submitButtonDisabled,this._inputSelector=this._settings.inputSelector,this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._errorSelector=this._settings.errorArea,this._errorActive=this._settings.errorActive}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideError(t)}))}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._submitButton.classList.add(this._submitButtonDisabled),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._submitButtonDisabled),this._submitButton.disabled=!1)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideError(e):this._showError(e)}},{key:"_showError",value:function(e){var t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(this._errorSelector),t.textContent=e.validationMessage,t.classList.add(this._errorActive)}},{key:"_hideError",value:function(e){var t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._errorSelector),t.textContent="",t.classList.remove(this._errorActive)}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._container=document.querySelector("#".concat(t)),this.selector=t,this.closeButton=this._container.querySelector("#".concat(t,"__close")),this.overlay=this._container.querySelector(".popup__overlay"),this.setEventListeners()}var t,n;return t=e,(n=[{key:"open",value:function(){this._container.classList.add("popup_active"),this._handleEscClose()}},{key:"close",value:function(){this._container.classList.remove("popup_active"),document.removeEventListener("keydown",this.escPressed)}},{key:"_handleEscClose",value:function(){var e=this;this.escPressed=function(t){"Escape"===t.key&&e.close()},document.addEventListener("keydown",this.escPressed)}},{key:"setEventListeners",value:function(){this.closeButton.addEventListener("click",this.close.bind(this)),this.overlay.addEventListener("click",this.close.bind(this))}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=f(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},l.apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function d(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(a,e);var t,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(r);if(i){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=o.call(this,e)).callback=t,n.submitButton=n._container.querySelector(".edit__submit-btn"),n.submitButtonText=n.submitButton.textContent,n.loadingText="Guardando...",n._inputFields=n._container.querySelectorAll(".input__form"),n.selected={},n}return t=a,(n=[{key:"close",value:function(){this._container.querySelector(".edit__form").reset(),l(p(a.prototype),"close",this).call(this)}},{key:"open",value:function(e){var t=e.target;if(l(p(a.prototype),"open",this).call(this),"erase-btn"===t.id){var n=t.closest(".element"),r=t.cardId;this.selected={selectedCard:n,cardId:r}}}},{key:"loading",value:function(e){this.submitButton.textContent=e?this.loadingText:this.submitButtonText}},{key:"setEventListeners",value:function(){var e=this;l(p(a.prototype),"setEventListeners",this).call(this),this._container.querySelector(".edit__form").addEventListener("submit",(function(t){t.preventDefault(),e.callback(e._getInputValues())}))}},{key:"_getInputValues",value:function(){var e={};return this._inputFields.forEach((function(t){e[t.name]=t.value})),e}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=_(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},m.apply(this,arguments)}function _(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function g(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(a,e);var t,n,r,i,o=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(i){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return g(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).image=t._container.querySelector(".popup__image"),t.text=t._container.querySelector(".popup__name"),t}return t=a,(n=[{key:"open",value:function(e){m(w(a.prototype),"open",this).call(this);var t=e.target;this.image.src=t.getAttribute("src"),this.image.alt=t.getAttribute("alt"),this.text.textContent=t.getAttribute("alt")}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.job=n,this.avatarLocation=document.querySelector(".profile__pic"),this.nameLocation=document.querySelector(".profile__name"),this.jobLocation=document.querySelector(".profile__description")}var t,n;return t=e,n=[{key:"getUserInfo",value:function(){return{name:this.name,job:this.job,_id:this._id,avatar:this.avatar}}},{key:"setUserInfo",value:function(e,t,n){this.name=e,this.job=t,this._id=n,this.nameLocation.textContent=this.name,this.jobLocation.textContent=this.job}},{key:"setAvatar",value:function(e){this.avatar=e,this.avatarLocation.src=this.avatar}}],n&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(t,n){var r=t.data,i=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=i,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"setItem",value:function(e){this._container.prepend(e)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}}])&&L(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),C=document.querySelector(".profile__edit-button"),P=document.querySelector(".profile__add-button"),I=document.querySelector(".profile__avatar-btn"),B=document.querySelector(".input__name"),A=document.querySelector(".input__description"),T=document.querySelector(".profile__name"),q=document.querySelector(".profile__description"),R=document.querySelector("#card").content;function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}document.querySelector(".elements");var U=new t({baseUrl:"https://around.nomoreparties.co/v1/web_es_cohort_02",headers:{authorization:"04346056-dea4-4d40-8541-43203e80bf1a","Content-Type":"application/json"}}),D={};Promise.all([U.getUserInfo(),U.getInitialCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],o=i.name,a=i.about,s=i._id,c=i.avatar,u=r[1];K.setAvatar(c),K.setUserInfo(o,a,s),(D=new j({data:u,renderer:function(e){e.user=K._id;var t=z(e);D.setItem(t)}},".elements")).renderItems()})).catch((function(e){console.log(e)}));var V,N={};V={submitButton:".edit__submit-btn",submitButtonDisabled:"edit__submit-btn_inactive",inputSelector:".input__form",errorArea:"input__form_type-error",errorActive:"input__form-error_active"},Array.from(document.querySelectorAll(".edit__form")).forEach((function(e){var t=new o(e,V),n=e.getAttribute("name");N[n]=t,t.enableValidation()}));var J,z=function(e){return(J=new r({name:e.name,link:e.link,id:e._id,owner:e.owner,likes:e.likes,template:R,user:e.user,imageOpener:function(e){H.open(e)},eraserOpener:function(e){$.open(e)},handleLike:function(e){var t,n,r;n=(t=e).cardId,r=t.button,U.postLikes(n).then((function(e){J.likeTheCard(r);var t=e.likes.length;J.newLikeNumber(r,t)})).catch((function(e){console.log(e)}))},handleDislike:function(e){var t,n,r;n=(t=e).cardId,r=t.button,U.deleteLikes(n).then((function(e){J.dislikeTheCard(r);var t=e.likes.length;J.newLikeNumber(r,t)})).catch((function(e){console.log(e)}))}})).createCardElement()},H=new S("popup"),M=new y("gallery",(function(e){M.loading("loading"),U.postCard(e).then((function(e){e.owner=K.getUserInfo(),e.user=e.owner._id,e.likes=[];var t=z(e);D.setItem(t),M.close()})).catch((function(e){console.log(e)})).finally((function(){N.gallery.resetValidation(),M.loading()}))})),F=new y("edit",(function(e){var t=e.name,n=e.about;F.loading("loading"),U.postUserInfo(t,n).then((function(e){var t=e.name,n=e.about,r=e._id;K.setUserInfo(t,n,r),F.close()})).catch((function(e){console.log(e)})).finally((function(){N.edit.resetValidation(),F.loading()}))})),G=new y("avatar",(function(e){var t=e.link;G.loading("loading"),U.postUserAvatar(t).then((function(e){K.setAvatar(e.avatar),G.close()})).catch((function(e){console.log(e)})).finally((function(){N.avatar.resetValidation(),G.loading()}))})),$=new y("eraser",(function(){$.loading("loading"),U.deleteCard($.selected).then((function(){J.eraseTheCard($.selected),$.close()})).catch((function(e){console.log(e)})).finally((function(){N.eraser,$.loading()}))})),K=new E(T.textContent,q.textContent);C.addEventListener("click",(function(e){var t=K.getUserInfo();B.value=t.name,A.value=t.job,N.edit.resetValidation(),F.open(e)})),I.addEventListener("click",(function(e){N.avatar.resetValidation(),G.open(e)})),P.addEventListener("click",(function(e){N.gallery.resetValidation(),M.open(e)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQzlCcUIsU0FBUSxXQUNQbEIsRUFBdUIsT0FDdkJPLEVBQWF4RCxTQUNmLEdBQ0YsSUFvRGFzQyxFQUFjLElBQUk3QixFQUFVb0IsRUFBT2xHLFlBQWFuQyxFQUFNbUMsYUFHakU2RixFQUFXakYsaUJBQWlCLFNBQVMsU0FBQzdCLEdBQ3BDLElBQU1pSyxFQUFXckMsRUFBWUgsY0FDN0JSLEVBQVF2QixNQUFRdUUsRUFBU3BMLEtBQ3pCcUksRUFBUXhCLE1BQVF1RSxFQUFTakUsSUFDekJ1QyxFQUFxQixLQUFFbUIsa0JBQ3ZCQyxFQUFnQmQsS0FBSzdJLEVBQ3ZCLElBRUFnSCxFQUFhbkYsaUJBQWlCLFNBQVMsU0FBQzdCLEdBQ3RDdUksRUFBdUIsT0FBRW1CLGtCQUN6QkcsRUFBZWhCLEtBQUs3SSxFQUN0QixJQUVBK0csRUFBVWxGLGlCQUFpQixTQUFTLFNBQUM3QixHQUNuQ3VJLEVBQXdCLFFBQUVtQixrQkFDMUJKLEVBQVlULEtBQUs3SSxFQUNuQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3ByaW50XzgvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vc3ByaW50XzgvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NwcmludF84Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9zcHJpbnRfOC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NwcmludF84Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9zcHJpbnRfOC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NwcmludF84Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vc3ByaW50XzgvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3NwcmludF84Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zcHJpbnRfOC8uL3NyYy9wYWdlL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHtiYXNlVXJsLCBoZWFkZXJzfSl7XG4gICAgdGhpcy5iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLmhlYWRlcnMgPSBoZWFkZXJzO1xuICAgIHRoaXMuYXV0aCA9IHRoaXMuaGVhZGVycy5hdXRob3JpemF0aW9uO1xuICB9XG5cbiAgX2NoZWNrUmVzcG9uc2UgKHJlcykge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3IgZ2V0dGluZyB1c2VyIGRhdGE6ICR7cmVzLnN0YXR1c30sXG4gICAgICAke3Jlcy5zdGF0dXNUZXh0fWApO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzICgpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5hdXRoXG4gICAgICB9XG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxuICB9XG5cbiAgZ2V0VXNlckluZm8gKCl7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuYXV0aFxuICAgICAgfVxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcbiAgfVxuXG4gIHBvc3RVc2VySW5mbyhuYW1lLCBhYm91dCl7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgYWJvdXQ6IGFib3V0XG4gICAgICB9KVxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcbiAgfVxuXG4gIHBvc3RVc2VyQXZhdGFyKGxpbmspe1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IGxpbmtcbiAgICAgIH0pXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxuICB9XG5cbiAgcG9zdENhcmQoe25hbWUsbGlua30pe1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgbGlua1xuICAgICAgfSlcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXG4gIH1cblxuICBwb3N0TGlrZXMoY2FyZElkKXtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7fSlcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXG4gIH1cblxuICBkZWxldGVMaWtlcyhjYXJkSWQpe1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt9KVxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoe2NhcmRJZH0pe1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt9KVxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7bmFtZSwgbGluaywgaWQsIG93bmVyLCBsaWtlcywgdGVtcGxhdGUsIHVzZXIsIGltYWdlT3BlbmVyLCBlcmFzZXJPcGVuZXIsIGhhbmRsZUxpa2UsIGhhbmRsZURpc2xpa2V9KXtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMubGluayA9IGxpbms7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMub3duZXI9IG93bmVyO1xuICAgIHRoaXMuX293bmVySWQgPSB0aGlzLm93bmVyLl9pZDtcbiAgICB0aGlzLnVzZXIgPSB1c2VyO1xuICAgIHRoaXMubGlrZXMgPSBsaWtlcztcbiAgICB0aGlzLmxpa2VzQW1vdW50ID0gdGhpcy5saWtlcy5sZW5ndGg7XG4gICAgdGhpcy5oYW5kbGVMaWtlID0gaGFuZGxlTGlrZTtcbiAgICB0aGlzLmhhbmRsZURpc2xpa2UgPSBoYW5kbGVEaXNsaWtlO1xuICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICB0aGlzLmltYWdlT3BlbmVyID0gaW1hZ2VPcGVuZXI7XG4gICAgdGhpcy5lcmFzZXJPcGVuZXI9IGVyYXNlck9wZW5lcjtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMudGVtcGxhdGUucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50XCIpLmNsb25lTm9kZSh0cnVlKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpO1xuICAgIHRoaXMubGlrZUNvdW50ZXIgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2NvdW50ZXJcIik7XG4gICAgdGhpcy5lcmFzZUJ0biA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fZXJhc2VcIik7XG4gICAgdGhpcy5saWtlQnRuID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlXCIpO1xuICAgIHRoaXMuZXJhc2VCdG4uY2FyZElkID0gdGhpcy5pZDtcbiAgfVxuXG4gIGNyZWF0ZUNhcmRFbGVtZW50ICgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xvY2F0aW9uXCIpLnRleHRDb250ZW50ID0gdGhpcy5uYW1lO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLm5hbWU7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMubGluaztcbiAgICB0aGlzLmxpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5saWtlc0Ftb3VudDtcbiAgICB0aGlzLm5ld0xpa2VzQW1vdW50ID0gXCJcIjtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMubGlrZWQgPSB0aGlzLl9oYXNMaWtlZCgpO1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlICgpIHtcbiAgICBpZiAodGhpcy51c2VyICE9PSB0aGlzLl9vd25lcklkKXtcbiAgICAgIHRoaXMuZXJhc2VCdG4uY2xhc3NMaXN0LmFkZChcImVsZW1lbnRfX2VyYXNlX2Rpc2FibGVkXCIpO1xuICAgICAgdGhpcy5lcmFzZUJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgX2hhc0xpa2VkICgpIHtcbiAgICBpZiAodGhpcy5saWtlcy5zb21lKGU9PmUuX2lkID09PSB0aGlzLnVzZXIpKXtcbiAgICAgIHRoaXMubGlrZUJ0bi5jbGFzc0xpc3QuYWRkKFwiZWxlbWVudF9fbGlrZWRcIilcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMgKCkge1xuICAgIHRoaXMubGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCk9Pnt0aGlzLmxpa2luZ1RoZUNhcmQoZXZ0KTt9KTtcbiAgICB0aGlzLmVyYXNlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmVyYXNlck9wZW5lcik7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KT0+e3RoaXMuaW1hZ2VPcGVuZXIoZXZ0KTt9KVxuICB9XG5cbiAgbGlraW5nVGhlQ2FyZCA9IChldnQpID0+IHtcbiAgICBjb25zdCBidXR0b24gPSBldnQudGFyZ2V0O1xuICAgIGNvbnN0IGNhcmQgPSB7IGJ1dHRvbjogdGhpcy5saWtlQnRuLCBjYXJkSWQ6IHRoaXMuaWQgfVxuICAgIGlmKGJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJlbGVtZW50X19saWtlZFwiKSl7XG5cbiAgICAgIHRoaXMuaGFuZGxlRGlzbGlrZShjYXJkKTtcbiAgICB9ZWxzZXtcbiAgICAgIHRoaXMuaGFuZGxlTGlrZShjYXJkKTtcbiAgICB9XG4gIH1cblxuICBsaWtlVGhlQ2FyZCAoYnV0dG9uKSB7XG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50X19saWtlZFwiKTtcbiAgICB0aGlzLm5ld0xpa2VzQW1vdW50ID0gdGhpcy5saWtlc0Ftb3VudCsxO1xuXG4gIH1cblxuICBkaXNsaWtlVGhlQ2FyZCAoYnV0dG9uKSB7XG4gICAgdGhpcy5uZXdMaWtlc0Ftb3VudCA9IHRoaXMubGlrZXNBbW91bnQtMTtcbiAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImVsZW1lbnRfX2xpa2VkXCIpO1xuXG4gIH1cblxuICBuZXdMaWtlTnVtYmVyKGJ1dHRvbiwgbGlrZXMpe1xuICAgIGJ1dHRvbi5uZXh0RWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQgPSBsaWtlcztcbiAgfVxuXG4gIGVyYXNlVGhlQ2FyZCAgKHtzZWxlY3RlZENhcmR9KSAge1xuICAgIHNlbGVjdGVkQ2FyZC5yZW1vdmUoKTtcbiAgICBzZWxlY3RlZENhcmQgPSBudWxsXG4gIH1cblxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3J7XG4gIGNvbnN0cnVjdG9yKGZvcm0sIHNldHRpbmdzKXtcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b24pO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbkRpc2FibGVkID0gdGhpcy5fc2V0dGluZ3Muc3VibWl0QnV0dG9uRGlzYWJsZWQ7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHRoaXMuX3NldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xuICAgIHRoaXMuX2Vycm9yU2VsZWN0b3IgPSB0aGlzLl9zZXR0aW5ncy5lcnJvckFyZWE7XG4gICAgdGhpcy5fZXJyb3JBY3RpdmUgPSB0aGlzLl9zZXR0aW5ncy5lcnJvckFjdGl2ZTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24gKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KT0+e2V2dC5wcmV2ZW50RGVmYXVsdCgpO30pO1xuICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uICgpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dEVsZW1lbnQpfVxuICAgICk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMgKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7dGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO30pXG4gICAgfSlcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSAoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKXtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX3N1Ym1pdEJ1dHRvbkRpc2FibGVkKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3N1Ym1pdEJ1dHRvbkRpc2FibGVkKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQgKCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkgKGlucHV0RWxlbWVudCkge1xuICAgIGlmKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpe1xuICAgICAgdGhpcy5fc2hvd0Vycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICB0aGlzLl9oaWRlRXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfc2hvd0Vycm9yIChpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBmb3JtRXJyb3JTcGFuID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JTZWxlY3Rvcik7XG4gICAgZm9ybUVycm9yU3Bhbi50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBmb3JtRXJyb3JTcGFuLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JBY3RpdmUpO1xuICB9XG5cbiAgX2hpZGVFcnJvciAoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZm9ybUVycm9yU3BhbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yU2VsZWN0b3IpO1xuICAgIGZvcm1FcnJvclNwYW4udGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGZvcm1FcnJvclNwYW4uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckFjdGl2ZSk7XG4gIH1cblxuXG59XG4iLCJleHBvcnQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7cG9wdXBTZWxlY3Rvcn1gKTtcbiAgICB0aGlzLnNlbGVjdG9yID0gcG9wdXBTZWxlY3RvcjtcbiAgICB0aGlzLmNsb3NlQnV0dG9uID0gdGhpcy5fY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYCMke3BvcHVwU2VsZWN0b3J9X19jbG9zZWApO1xuICAgIHRoaXMub3ZlcmxheSA9IHRoaXMuX2NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX292ZXJsYXknKTtcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBvcGVuICAoKSAge1xuICAgIHRoaXMuX2NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwicG9wdXBfYWN0aXZlXCIpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKCk7XG4gIH1cblxuICBjbG9zZSAoKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9hY3RpdmVcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5lc2NQcmVzc2VkKVxuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlICAoKSAge1xuICAgIHRoaXMuZXNjUHJlc3NlZCA9IChldnQpID0+IHtcbiAgICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKXtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLmVzY1ByZXNzZWQpXG5cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzICAoKSAge1xuICAgIHRoaXMuY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5vdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xuICB9XG59IiwiaW1wb3J0IHtQb3B1cH0gZnJvbSBcIi4vUG9wdXAuanNcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBjYWxsYmFjaykge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB0aGlzLnN1Ym1pdEJ1dHRvbiA9IHRoaXMuX2NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmVkaXRfX3N1Ym1pdC1idG5cIik7XG4gICAgdGhpcy5zdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XG4gICAgdGhpcy5sb2FkaW5nVGV4dCA9IFwiR3VhcmRhbmRvLi4uXCI7XG4gICAgdGhpcy5faW5wdXRGaWVsZHMgPSB0aGlzLl9jb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcIi5pbnB1dF9fZm9ybVwiKTtcbiAgICB0aGlzLnNlbGVjdGVkID0ge307XG4gIH1cblxuICBjbG9zZSAoKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdF9fZm9ybVwiKS5yZXNldCgpO1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cblxuICBvcGVuIChldnQpIHtcbiAgICBjb25zdCBidXR0b24gPSBldnQudGFyZ2V0O1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICBpZihidXR0b24uaWQgPT09IFwiZXJhc2UtYnRuXCIpe1xuICAgICAgY29uc3Qgc2VsZWN0ZWRDYXJkID0gYnV0dG9uLmNsb3Nlc3QoXCIuZWxlbWVudFwiKTtcbiAgICAgIGNvbnN0IGNhcmRJZCA9IGJ1dHRvbi5jYXJkSWRcbiAgICAgIHRoaXMuc2VsZWN0ZWQgPSB7c2VsZWN0ZWRDYXJkLCBjYXJkSWR9O1xuICAgIH1cbiAgfVxuXG4gIGxvYWRpbmcobG9hZGluZyl7XG4gICAgaWYobG9hZGluZyl7XG4gICAgICB0aGlzLnN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMubG9hZGluZ1RleHQ7XG4gICAgfWVsc2V7XG4gICAgICB0aGlzLnN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuc3VibWl0QnV0dG9uVGV4dDtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycyAgKCkgIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmVkaXRfX2Zvcm1cIikuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5jYWxsYmFjayh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgfVxuXG4gICAgX2dldElucHV0VmFsdWVzICgpIHtcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0RmllbGRzLmZvckVhY2goZmllbGQgPT4ge2lucHV0VmFsdWVzW2ZpZWxkLm5hbWVdID0gZmllbGQudmFsdWU7fSApO1xuICAgIHJldHVybiBpbnB1dFZhbHVlcztcbiAgfVxufSIsImltcG9ydCB7UG9wdXB9IGZyb20gXCIuL1BvcHVwLmpzXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLmltYWdlID0gdGhpcy5fY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcbiAgICB0aGlzLnRleHQgPSB0aGlzLl9jb250YWluZXIucXVlcnlTZWxlY3RvcignLnBvcHVwX19uYW1lJyk7XG4gIH1cblxuICBvcGVuIChldnQpIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgY29uc3QgaW1hZ2UgPSBldnQudGFyZ2V0O1xuICAgIHRoaXMuaW1hZ2Uuc3JjID0gaW1hZ2UuZ2V0QXR0cmlidXRlKFwic3JjXCIpO1xuICAgIHRoaXMuaW1hZ2UuYWx0ID0gaW1hZ2UuZ2V0QXR0cmlidXRlKFwiYWx0XCIpO1xuICAgIHRoaXMudGV4dC50ZXh0Q29udGVudCA9IGltYWdlLmdldEF0dHJpYnV0ZShcImFsdFwiKTtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IobmFtZSwgam9iKXtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMuam9iID0gam9iO1xuICAgIHRoaXMuYXZhdGFyTG9jYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3BpY1wiKTtcbiAgICB0aGlzLm5hbWVMb2NhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcbiAgICB0aGlzLmpvYkxvY2F0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvICgpIHtcbiAgICBjb25zdCB1c2VySW5mbyA9IHtcbiAgICAgIG5hbWUgOiB0aGlzLm5hbWUsXG4gICAgICBqb2IgOiB0aGlzLmpvYixcbiAgICAgIF9pZDogdGhpcy5faWQsXG4gICAgICBhdmF0YXI6IHRoaXMuYXZhdGFyLFxuICAgIH1cbiAgICByZXR1cm4gdXNlckluZm9cbiAgfVxuXG4gIHNldFVzZXJJbmZvIChuYW1lLGFib3V0LF9pZCkge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5qb2IgPSBhYm91dDtcbiAgICB0aGlzLl9pZCA9IF9pZDtcbiAgICB0aGlzLm5hbWVMb2NhdGlvbi50ZXh0Q29udGVudCA9IHRoaXMubmFtZTtcbiAgICB0aGlzLmpvYkxvY2F0aW9uLnRleHRDb250ZW50ID0gdGhpcy5qb2I7XG4gIH1cblxuICBzZXRBdmF0YXIgKGF2YXRhcil7XG4gICAgdGhpcy5hdmF0YXIgPSBhdmF0YXI7XG4gICAgdGhpcy5hdmF0YXJMb2NhdGlvbi5zcmMgPSB0aGlzLmF2YXRhcjtcbiAgfVxuXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gZGF0YTtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgc2V0SXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSlcbiAgICB9KTtcblxuICB9XG59IiwiZXhwb3J0IGNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTtcbmV4cG9ydCBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xuZXhwb3J0IGNvbnN0IGF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXItYnRuJyk7XG5cbmV4cG9ydCBjb25zdCBuZXdOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbnB1dF9fbmFtZVwiKTtcbmV4cG9ydCBjb25zdCBuZXdEZXNjID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbnB1dF9fZGVzY3JpcHRpb25cIik7XG5cbmV4cG9ydCBjb25zdCBwZXJzb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5leHBvcnQgY29uc3QgYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuXG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkXCIpLmNvbnRlbnQ7XG5leHBvcnQgY29uc3QgY2FyZEFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzXCIpO1xuXG5leHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XG4gIHN1Ym1pdEJ1dHRvbjogXCIuZWRpdF9fc3VibWl0LWJ0blwiLFxuICBzdWJtaXRCdXR0b25EaXNhYmxlZDogXCJlZGl0X19zdWJtaXQtYnRuX2luYWN0aXZlXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLmlucHV0X19mb3JtXCIsXG4gIGVycm9yQXJlYTogXCJpbnB1dF9fZm9ybV90eXBlLWVycm9yXCIsXG4gIGVycm9yQWN0aXZlOiBcImlucHV0X19mb3JtLWVycm9yX2FjdGl2ZVwiXG59O1xuXG5cbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIlZhbGxlIGRlIFlvc2VtaXRlXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIlxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTW9udGHDsWFzIENhbHZhc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIlxuICB9LFxuICB7XG4gICAgbmFtZTogXCJQYXJxdWUgTmFjaW9uYWwgZGUgbGEgVmFub2lzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIlxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIlxuICB9XG5dO1xuXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IHByb2ZpbGVTcmMgZnJvbSBcIi4uL2ltYWdlcy9qYWNrLmpwZ1wiO1xuaW1wb3J0IHVuZGVybGluZVNyYyBmcm9tIFwiLi4vaW1hZ2VzL0xpbmUucG5nXCI7XG5pbXBvcnQgYXJvdW5kU3JjIGZyb20gXCIuLi9pbWFnZXMvVmVjdG9yLnBuZ1wiO1xuXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCB7c2V0dGluZ3MgLGNhcmRUZW1wbGF0ZSwgZWRpdEJ1dHRvbiwgYWRkQnV0dG9uLCBhdmF0YXJCdXR0b24sIG5ld05hbWUsIG5ld0Rlc2MsIHBlcnNvbiwgYWJvdXQsIGNhcmRBcmVhLCBpbml0aWFsQ2FyZHMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCJcblxuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYl9lc19jb2hvcnRfMDJcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiMDQzNDYwNTYtZGVhNC00ZDQwLTg1NDEtNDMyMDNlODBiZjFhXCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgfVxufSk7XG5cbmxldCBpbml0aWFsQ2FyZCA9IHt9O1xuXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvKCksYXBpLmdldEluaXRpYWxDYXJkcygpXSlcbi50aGVuKChbe25hbWUsYWJvdXQsX2lkLGF2YXRhcn0sY2FyZHNdKT0+e1xuICB1c2VyUHJvZmlsZS5zZXRBdmF0YXIoYXZhdGFyKVxuICB1c2VyUHJvZmlsZS5zZXRVc2VySW5mbyhuYW1lLGFib3V0LF9pZClcblxuICBpbml0aWFsQ2FyZCA9IG5ldyBTZWN0aW9uICh7XG4gICAgZGF0YTogY2FyZHMsXG4gICAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XG4gICAgICBkYXRhLnVzZXIgPSB1c2VyUHJvZmlsZS5faWQ7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoZGF0YSk7XG4gICAgICBpbml0aWFsQ2FyZC5zZXRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICB9XG4gIH0sXG4gIFwiLmVsZW1lbnRzXCJcbiAgKTtcbiAgaW5pdGlhbENhcmQucmVuZGVySXRlbXMoKVxufSlcbi5jYXRjaCgoZXJyKT0+e2NvbnNvbGUubG9nKGVycil9KVxuXG5cblxuXG5cbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XG5cbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoc2V0dGluZ3MpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZWRpdF9fZm9ybVwiKSk7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUVsZW1lbnQsIHNldHRpbmdzKTtcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcbiAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gIH0pO1xufTtcblxuZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncyk7XG5cbmV4cG9ydCBjb25zdCBoYW5kbGVTdWJtaXRDYXJkID0gKGluZm8pPT57XG4gIGFkZENhcmRGb3JtLmxvYWRpbmcoJ2xvYWRpbmcnKTtcbiAgYXBpLnBvc3RDYXJkKGluZm8pXG4gIC50aGVuKChyZXMpPT57XG4gICAgcmVzLm93bmVyID0gdXNlclByb2ZpbGUuZ2V0VXNlckluZm8oKTtcbiAgICByZXMudXNlciA9IHJlcy5vd25lci5faWQ7XG4gICAgcmVzLmxpa2VzID0gW107XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKHJlcyk7XG4gICAgaW5pdGlhbENhcmQuc2V0SXRlbShjYXJkRWxlbWVudCk7XG4gICAgYWRkQ2FyZEZvcm0uY2xvc2UoKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpPT57Y29uc29sZS5sb2coZXJyKX0pXG4gIC5maW5hbGx5KCgpPT57XG4gICAgZm9ybVZhbGlkYXRvcnNbJ2dhbGxlcnknXS5yZXNldFZhbGlkYXRpb24oKTtcbiAgICBhZGRDYXJkRm9ybS5sb2FkaW5nKCk7fVxuICApXG59XG5cbmV4cG9ydCBjb25zdCBoYW5kbGVTdWJtaXRQcm9maWxlID0gKHtuYW1lLGFib3V0fSkgPT57XG4gIHByb2ZpbGVGb3JtRWRpdC5sb2FkaW5nKCdsb2FkaW5nJyk7XG4gIGFwaS5wb3N0VXNlckluZm8obmFtZSwgYWJvdXQpXG4gIC50aGVuKCh7bmFtZSxhYm91dCxfaWR9KT0+e1xuICAgIHVzZXJQcm9maWxlLnNldFVzZXJJbmZvKG5hbWUsIGFib3V0LF9pZCk7XG4gICAgcHJvZmlsZUZvcm1FZGl0LmNsb3NlKCk7fSlcbiAgLmNhdGNoKChlcnIpPT57Y29uc29sZS5sb2coZXJyKX0pXG4gIC5maW5hbGx5KCgpPT57XG4gICAgZm9ybVZhbGlkYXRvcnNbJ2VkaXQnXS5yZXNldFZhbGlkYXRpb24oKTtcbiAgICBwcm9maWxlRm9ybUVkaXQubG9hZGluZygpO1xuICB9KVxufTtcblxuZXhwb3J0IGNvbnN0IGhhbmRsZVN1Ym1pdEF2YXRhciA9ICh7bGlua30pID0+e1xuICBhdmF0YXJGb3JtRWRpdC5sb2FkaW5nKCdsb2FkaW5nJyk7XG4gIGFwaS5wb3N0VXNlckF2YXRhcihsaW5rKVxuICAudGhlbigocmVzKT0+e3VzZXJQcm9maWxlLnNldEF2YXRhcihyZXMuYXZhdGFyKVxuICBhdmF0YXJGb3JtRWRpdC5jbG9zZSgpO30pXG4gIC5jYXRjaCgoZXJyKT0+e2NvbnNvbGUubG9nKGVycil9KVxuICAuZmluYWxseSgoKT0+e1xuICAgIGZvcm1WYWxpZGF0b3JzWydhdmF0YXInXS5yZXNldFZhbGlkYXRpb24oKTtcbiAgICBhdmF0YXJGb3JtRWRpdC5sb2FkaW5nKCk7XG4gIH0pXG59O1xuXG5leHBvcnQgY29uc3QgaGFuZGxlRXJhc2UgPSAoKT0+e1xuICBjb25maXJtRXJhc2UubG9hZGluZygnbG9hZGluZycpO1xuICBhcGkuZGVsZXRlQ2FyZChjb25maXJtRXJhc2Uuc2VsZWN0ZWQpXG4gIC50aGVuKCgpPT57Y2FyZC5lcmFzZVRoZUNhcmQoY29uZmlybUVyYXNlLnNlbGVjdGVkKTtcbiAgICBjb25maXJtRXJhc2UuY2xvc2UoKTt9KVxuICAuY2F0Y2goKGVycik9Pntjb25zb2xlLmxvZyhlcnIpfSlcbiAgLmZpbmFsbHkoKCk9PntcbiAgICBmb3JtVmFsaWRhdG9yc1snZXJhc2VyJ11cbiAgICBjb25maXJtRXJhc2UubG9hZGluZygpO1xuICB9KVxufTtcblxuZXhwb3J0IGNvbnN0IGhhbmRsZUxpa2UgPSh7Y2FyZElkLGJ1dHRvbn0pID0+IHtcbiAgYXBpLnBvc3RMaWtlcyhjYXJkSWQpXG4gIC50aGVuKChyZXMpPT57XG4gICAgY2FyZC5saWtlVGhlQ2FyZChidXR0b24pXG4gICAgY29uc3QgbmV3TGlrZXMgPSByZXMubGlrZXMubGVuZ3RoO1xuICAgIGNhcmQubmV3TGlrZU51bWJlcihidXR0b24sIG5ld0xpa2VzKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpPT57Y29uc29sZS5sb2coZXJyKX0pXG59O1xuXG5leHBvcnQgY29uc3QgaGFuZGxlRGlzbGlrZSA9KHtjYXJkSWQsYnV0dG9ufSkgPT4ge1xuICBhcGkuZGVsZXRlTGlrZXMoY2FyZElkKVxuICAudGhlbigocmVzKT0+e1xuICAgIGNhcmQuZGlzbGlrZVRoZUNhcmQoYnV0dG9uKVxuICAgIGNvbnN0IG5ld0xpa2VzID0gcmVzLmxpa2VzLmxlbmd0aDtcbiAgICBjYXJkLm5ld0xpa2VOdW1iZXIoYnV0dG9uLCBuZXdMaWtlcyk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKT0+e2NvbnNvbGUubG9nKGVycil9KVxufTtcblxubGV0IGNhcmQ7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVDYXJkID0gKGRhdGEpID0+IHtcbiAgIGNhcmQgPSBuZXcgQ2FyZCAoe1xuICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICBsaW5rOmRhdGEubGluayxcbiAgICBpZDpkYXRhLl9pZCxcbiAgICBvd25lcjpkYXRhLm93bmVyLFxuICAgIGxpa2VzOmRhdGEubGlrZXMsXG4gICAgdGVtcGxhdGU6Y2FyZFRlbXBsYXRlLFxuICAgIHVzZXI6ZGF0YS51c2VyLFxuICAgIGltYWdlT3BlbmVyOihldnQpPT57bGlnaHRib3gub3BlbihldnQpfSxcbiAgICBlcmFzZXJPcGVuZXI6KGV2dCk9Pntjb25maXJtRXJhc2Uub3BlbihldnQpfSxcbiAgICBoYW5kbGVMaWtlOihldnQpPT57aGFuZGxlTGlrZShldnQpfSxcbiAgICBoYW5kbGVEaXNsaWtlOihldnQpPT57aGFuZGxlRGlzbGlrZShldnQpfVxuICB9KVxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuY3JlYXRlQ2FyZEVsZW1lbnQoKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuXG5leHBvcnQgY29uc3QgbGlnaHRib3ggPSBuZXcgUG9wdXBXaXRoSW1hZ2UgKFwicG9wdXBcIik7XG5cbmV4cG9ydCBjb25zdCBhZGRDYXJkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtIChcImdhbGxlcnlcIiwgaGFuZGxlU3VibWl0Q2FyZCk7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybUVkaXQgPSBuZXcgUG9wdXBXaXRoRm9ybSAoXCJlZGl0XCIsIGhhbmRsZVN1Ym1pdFByb2ZpbGUpO1xuXG5leHBvcnQgY29uc3QgYXZhdGFyRm9ybUVkaXQgPSBuZXcgUG9wdXBXaXRoRm9ybSAoXCJhdmF0YXJcIiwgaGFuZGxlU3VibWl0QXZhdGFyKTtcblxuZXhwb3J0IGNvbnN0IGNvbmZpcm1FcmFzZSA9IG5ldyBQb3B1cFdpdGhGb3JtIChcImVyYXNlclwiLCBoYW5kbGVFcmFzZSk7XG5cbmV4cG9ydCBjb25zdCB1c2VyUHJvZmlsZSA9IG5ldyBVc2VySW5mbyAocGVyc29uLnRleHRDb250ZW50LCBhYm91dC50ZXh0Q29udGVudCk7XG5cbihmdW5jdGlvbiBkb2N1bWVudEV2ZW50TGlzdGVuZXJzICgpIHtcbiAgZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCk9PntcbiAgICBjb25zdCB1c2VySW5mbyA9IHVzZXJQcm9maWxlLmdldFVzZXJJbmZvKCk7XG4gICAgbmV3TmFtZS52YWx1ZSA9IHVzZXJJbmZvLm5hbWU7XG4gICAgbmV3RGVzYy52YWx1ZSA9IHVzZXJJbmZvLmpvYjtcbiAgICBmb3JtVmFsaWRhdG9yc1snZWRpdCddLnJlc2V0VmFsaWRhdGlvbigpO1xuICAgIHByb2ZpbGVGb3JtRWRpdC5vcGVuKGV2dCk7XG4gIH0pO1xuXG4gIGF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCk9PntcbiAgICBmb3JtVmFsaWRhdG9yc1snYXZhdGFyJ10ucmVzZXRWYWxpZGF0aW9uKCk7XG4gICAgYXZhdGFyRm9ybUVkaXQub3BlbihldnQpO1xuICB9KVxuXG4gIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCk9PntcbiAgICBmb3JtVmFsaWRhdG9yc1snZ2FsbGVyeSddLnJlc2V0VmFsaWRhdGlvbigpO1xuICAgIGFkZENhcmRGb3JtLm9wZW4oZXZ0KTtcbiAgfSk7XG59KSgpOyJdLCJuYW1lcyI6WyJBcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsInRoaXMiLCJhdXRoIiwiYXV0aG9yaXphdGlvbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiZmV0Y2giLCJ0aGVuIiwiX2NoZWNrUmVzcG9uc2UiLCJuYW1lIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImxpbmsiLCJhdmF0YXIiLCJjYXJkSWQiLCJDYXJkIiwiaWQiLCJvd25lciIsImxpa2VzIiwidGVtcGxhdGUiLCJ1c2VyIiwiaW1hZ2VPcGVuZXIiLCJlcmFzZXJPcGVuZXIiLCJoYW5kbGVMaWtlIiwiaGFuZGxlRGlzbGlrZSIsImV2dCIsImJ1dHRvbiIsInRhcmdldCIsImNhcmQiLCJsaWtlQnRuIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJfb3duZXJJZCIsIl9pZCIsImxpa2VzQW1vdW50IiwibGVuZ3RoIiwiX2NhcmRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImNsb25lTm9kZSIsIl9jYXJkSW1hZ2UiLCJsaWtlQ291bnRlciIsImVyYXNlQnRuIiwidGV4dENvbnRlbnQiLCJhbHQiLCJzcmMiLCJuZXdMaWtlc0Ftb3VudCIsIl9zZXRFdmVudExpc3RlbmVycyIsImxpa2VkIiwiX2hhc0xpa2VkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiYWRkIiwiZGlzYWJsZWQiLCJzb21lIiwiZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJsaWtpbmdUaGVDYXJkIiwicmVtb3ZlIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwic2VsZWN0ZWRDYXJkIiwiRm9ybVZhbGlkYXRvciIsImZvcm0iLCJzZXR0aW5ncyIsIl9mb3JtIiwiX3NldHRpbmdzIiwiX3N1Ym1pdEJ1dHRvbiIsInN1Ym1pdEJ1dHRvbiIsIl9zdWJtaXRCdXR0b25EaXNhYmxlZCIsInN1Ym1pdEJ1dHRvbkRpc2FibGVkIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfZXJyb3JTZWxlY3RvciIsImVycm9yQXJlYSIsIl9lcnJvckFjdGl2ZSIsImVycm9yQWN0aXZlIiwicHJldmVudERlZmF1bHQiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiX2hpZGVFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfaGFzSW52YWxpZElucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9zaG93RXJyb3IiLCJmb3JtRXJyb3JTcGFuIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfY29udGFpbmVyIiwiZG9jdW1lbnQiLCJzZWxlY3RvciIsImNsb3NlQnV0dG9uIiwib3ZlcmxheSIsInNldEV2ZW50TGlzdGVuZXJzIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImVzY1ByZXNzZWQiLCJrZXkiLCJjbG9zZSIsImJpbmQiLCJQb3B1cFdpdGhGb3JtIiwiY2FsbGJhY2siLCJzdWJtaXRCdXR0b25UZXh0IiwibG9hZGluZ1RleHQiLCJfaW5wdXRGaWVsZHMiLCJzZWxlY3RlZCIsInJlc2V0IiwiY2xvc2VzdCIsImxvYWRpbmciLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsImZpZWxkIiwidmFsdWUiLCJQb3B1cFdpdGhJbWFnZSIsImltYWdlIiwidGV4dCIsImdldEF0dHJpYnV0ZSIsIlVzZXJJbmZvIiwiam9iIiwiYXZhdGFyTG9jYXRpb24iLCJuYW1lTG9jYXRpb24iLCJqb2JMb2NhdGlvbiIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsImRhdGEiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiZWxlbWVudCIsInByZXBlbmQiLCJpbm5lckhUTUwiLCJpdGVtIiwiZWRpdEJ1dHRvbiIsImFkZEJ1dHRvbiIsImF2YXRhckJ1dHRvbiIsIm5ld05hbWUiLCJuZXdEZXNjIiwicGVyc29uIiwiY2FyZFRlbXBsYXRlIiwiY29udGVudCIsImFwaSIsImluaXRpYWxDYXJkIiwiYWxsIiwiZ2V0VXNlckluZm8iLCJnZXRJbml0aWFsQ2FyZHMiLCJjYXJkcyIsInVzZXJQcm9maWxlIiwic2V0QXZhdGFyIiwic2V0VXNlckluZm8iLCJjYXJkRWxlbWVudCIsImNyZWF0ZUNhcmQiLCJzZXRJdGVtIiwicmVuZGVySXRlbXMiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJmb3JtVmFsaWRhdG9ycyIsImZvcm1FbGVtZW50IiwidmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJlbmFibGVWYWxpZGF0aW9uIiwibGlnaHRib3giLCJvcGVuIiwiY29uZmlybUVyYXNlIiwicG9zdExpa2VzIiwibGlrZVRoZUNhcmQiLCJuZXdMaWtlcyIsIm5ld0xpa2VOdW1iZXIiLCJkZWxldGVMaWtlcyIsImRpc2xpa2VUaGVDYXJkIiwiY3JlYXRlQ2FyZEVsZW1lbnQiLCJhZGRDYXJkRm9ybSIsImluZm8iLCJwb3N0Q2FyZCIsImZpbmFsbHkiLCJyZXNldFZhbGlkYXRpb24iLCJwcm9maWxlRm9ybUVkaXQiLCJwb3N0VXNlckluZm8iLCJhdmF0YXJGb3JtRWRpdCIsInBvc3RVc2VyQXZhdGFyIiwiZGVsZXRlQ2FyZCIsImVyYXNlVGhlQ2FyZCIsInVzZXJJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==